var DataManager=function(){var e={},t=function(e){try{var t=window[e],a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0!==t.length}},l=t("localStorage"),c=t("sessionStorage"),a=function(e,t){var a=function(e,t){if(e===localStorage&&l||e===sessionStorage&&c)return e.getItem(t)}(e,t);return a||(a=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));if(t)return t[2]}(t)),a},n=function(e,t,a){return s=t,r=a,!(!((i=e)===localStorage&&l||i===sessionStorage&&c)||(i.setItem(s,r),0))||(n=t,o=a,document.cookie=n+"="+o,!1);var n,o,i,s,r};return e.getLocal=function(e){return a(window.localStorage,e)},e.setLocal=function(e,t){return n(window.localStorage,e,t)},e.getSession=function(e){return a(window.sessionStorage,e)},e.setSession=function(e,t){return n(window.sessionStorage,e,t)},e}(),widgetCookieAlert={init:function(){}},widgetSocialDrawer={socialFeedURL:"/wp-admin/admin-ajax.php?action=peppapig_social_mixed_feeds",socialFeedData:[],socialElementId:"",socialElement:null,socialOptions:{facebook:!1,twitter:!1,instagram:!1},init:function(e){if(e.hasOwnProperty("id")&&(this.socialElementId=e.id),e.hasOwnProperty("facebook")&&(this.socialOptions.facebook=e.facebook),e.hasOwnProperty("twitter")&&(this.socialOptions.twitter=e.twitter),e.hasOwnProperty("instagram")&&(this.socialOptions.instagram=e.instagram),this.socialElement=document.getElementById(this.socialElementId),!this.socialElement)return!1;widgetSocialDrawer.socialElementDrawer=this.socialElement.querySelector(".social-drawer"),widgetSocialDrawer.socialElementDrawerResults=this.socialElement.querySelector(".social-drawer-results"),widgetSocialDrawer.socialElementDrawerReveal=this.socialElement.querySelector(".social-drawer-reveal"),widgetSocialDrawer.socialElementDrawerRevealButton=this.socialElement.querySelector(".social-drawer-reveal a.button"),widgetSocialDrawer.socialElementDrawerRevealButton&&widgetSocialDrawer.socialElementDrawerRevealButton.addEventListener("click",function(e){e.preventDefault(),widgetSocialDrawer.socialElementDrawerReveal.classList.contains("open")?(widgetSocialDrawer.socialElementDrawerReveal.classList.remove("open"),widgetSocialDrawer.socialElementDrawer.style.maxHeight=""):(widgetSocialDrawer.socialElementDrawerReveal.classList.add("open"),widgetSocialDrawer.socialElementDrawer.style.maxHeight=widgetSocialDrawer.socialElementDrawer.firstElementChild.clientHeight+"px")},!1);var t=DataManager.getSession("widgetSocialDrawerData");if(null!==t)try{widgetSocialDrawer.socialFeedData=JSON.parse(t)}catch(e){}if(0===widgetSocialDrawer.socialFeedData.length){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===this.readyState&&200===this.status&&(JSON.parse(a.responseText).results.forEach(function(e){var t={image:"",content:"",type:"",socialUrl:"",socialTag:""};t.content=e.content,t.type=e.type,t.socialUrl=e.socialUrl,t.socialTag=e.socialTag,e.image&&(t.image=e.image),!0===widgetSocialDrawer.socialOptions[t.type]&&widgetSocialDrawer.socialFeedData.push(t)}),DataManager.setSession("widgetSocialDrawerData",JSON.stringify(widgetSocialDrawer.socialFeedData)),widgetSocialDrawer.renderSocialFeed())},a.open("GET",this.socialFeedURL,!0),a.send()}else widgetSocialDrawer.renderSocialFeed()},createElementFromHTML:function(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t.firstChild},renderSocialFeed:function(){for(var e=this.socialElement.querySelectorAll(".social-drawer-results > div.cell"),t=0,a={facebook:'<i class="fab fa-facebook-square"></i><span class="card-tag">{{socialTag}}</span>',twitter:'<span class="card-tag">'+widgetSocialDrawer.socialOptions.twitterTag+"</span>",instagram:'<span class="card-tag">'+widgetSocialDrawer.socialOptions.instagramTag+"</span>"},n='<div class="card" data-source="{{cardType}}"><a href="{{socialUrl}}" target="_blank">{{image}}<div class="card-body"><p class="card-text">{{content}}...</p></div><div class="card-label">{{cardLabel}}</div></a></div>';16<widgetSocialDrawer.socialFeedData.length;)widgetSocialDrawer.socialFeedData.pop();var o=widgetSocialDrawer.socialFeedData.shift();if(o)switch(o.type){case"facebook":a.facebook=a.facebook.replace("{{socialUrl}}",o.socialUrl),a.facebook=a.facebook.replace("{{socialTag}}",o.socialTag)}for(;o;){var i=""!==o.image?'<img class="card-img-top" src="{{imageSrc}}"/>'.replace("{{imageSrc}}",o.image):"",s="facebook"===o.type?a.facebook:"instagram"===o.type?a.instagram:a.twitter,r=n.replace("{{cardType}}",o.type).replace("{{socialUrl}}",o.socialUrl).replace("{{image}}",i).replace("{{content}}",o.content).replace("{{cardLabel}}",s),l=widgetSocialDrawer.createElementFromHTML(r);e[t].appendChild(l),++t>=e.length&&(t=0),o=widgetSocialDrawer.socialFeedData.shift()}}},widgetContact={contactURL:"/wp-admin/admin-ajax.php",contactForm:null,contactFormFields:null,contactFormSubmit:null,init:function(){this.contactForm=document.getElementById("sib-container"),this.contactFormFields=this.contactForm.querySelectorAll("input, textarea"),this.contactFormErrorMessage=document.getElementById("error-message"),this.contactFormSuccessMessage=document.getElementById("success-message"),this.contactFormToken=this.contactForm.querySelector("#_recaptcha"),this.contactFormSubmit=this.contactForm.querySelector("button[type=submit]"),this.contactFormSubmit&&this.contactFormSubmit.addEventListener("click",function(e){e.preventDefault(),widgetContact.contactFormSubmit.classList.contains("disabled")||(widgetContact.clearErrorMessages(),widgetContact.contactFormSubmit.classList.add("disabled"),widgetContact.sendMessage())},!1)},setToken:function(e){this.contactFormToken.value=e},clearFormFields:function(){this.contactForm.querySelector("form").reset(),this.contactFormErrorMessage.style="display: none",this.contactFormSuccessMessage.style="display: none"},clearErrorMessages:function(){this.contactFormErrorMessage.style="display: none"},showErrorMessage:function(e){this.contactFormErrorMessage.style="display: block"},showSuccessMessage:function(e){this.contactFormSuccessMessage.style="display: block",this.contactForm.style="display: none"},sendMessage:function(){for(var t={},a={},n=0;n<this.contactFormFields.length;n++)switch(this.contactFormFields[n].type){case"hidden":case"text":case"email":case"textarea":t[this.contactFormFields[n].name]=this.contactFormFields[n].value,a[this.contactFormFields[n].name]=this.contactFormFields[n].required;break;case"radio":a[this.contactFormFields[n].name]=this.contactFormFields[n].required,this.contactFormFields[n].checked&&(t[this.contactFormFields[n].name]=this.contactFormFields[n].id)}Object.keys(a).forEach(function(e){if(!0===t[e]&&""===a[e])return widgetContact.contactFormSubmit.classList.remove("disabled"),!1});var o="";n=0;Object.keys(t).forEach(function(e){o+=(0<n?"&":"")+e+"="+encodeURI(t[e]),n++});var i=new XMLHttpRequest;i.withCredentials=!0,i.onreadystatechange=function(){if(4===this.readyState)if(widgetContact.contactFormSubmit.classList.remove("disabled"),200===this.status){var e=JSON.parse(i.responseText);widgetContact.showSuccessMessage(e.message)}else if(400===this.status){e=JSON.parse(i.responseText);widgetContact.showErrorMessage(e.message)}},i.open("POST",this.contactURL+"?action=peppapig_form_contact",!0),i.setRequestHeader("content-type","application/x-www-form-urlencoded"),i.setRequestHeader("cache-control","no-cache"),i.send(o)}};window.addEventListener("load",function(e){if(widgetCookieAlert.init(),"object"==typeof AOS&&AOS.init(),"function"==typeof gtag)for(var t=document.querySelectorAll("a[data-download]"),a=0;a<t.length;a++)t[a].addEventListener("click",function(e){gtag("event","Click",{event_category:"DOWNLOAD",event_label:this.href,value:0})},!1);var n=document.querySelector("#search-results");""!==document.location.search&&n&&(screen.width<=1024?0===window.pageYOffset&&$("html, body").animate({scrollTop:n.offsetParent.offsetTop+600},400,function(){}):1024<screen.width&&0===window.pageYOffset&&$("html, body").animate({scrollTop:n.offsetParent.offsetTop+Math.floor(document.body.clientHeight/3)},400,function(){}));var o=document.querySelector("header nav.menu-block .btn-menu");o&&o.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector("header nav.menu-block");t.classList.contains("menu-block--open")?t.classList.remove("menu-block--open"):t.classList.add("menu-block--open")},!1);var i=document.querySelector("header nav.menu-block .btn-cancel");i&&i.addEventListener("click",function(e){e.preventDefault();var t=document.querySelector("header nav.menu-block");t.classList.contains("menu-block--open")?t.classList.remove("menu-block--open"):t.classList.add("menu-block--open")},!1),new Components.GridExpandable,new Components.FilterButtons},!1);var Components={instances:[]};(Components||(Components={})).Utils={uuidv4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}},function(o){var e=function(){function e(){var t=this;this.instances=[],this.timer=window.setInterval(function(e){t.updateAnimations()},5e3);for(var e=document.querySelectorAll(".fader"),a=0;a<e.length;a++)t.createInstance(e[a])}return e.prototype.createInstance=function(e){var t=this,a={element:e,index:0,paused:!1,slides:null};if(e.dataset.hasOwnProperty("autoplay")&&(a.paused="false"===e.dataset.autoplay),a.slides=e.querySelectorAll(".fader-slide"),a.bullets=e.querySelectorAll(".fader-bullets li button"),a.bullets)for(var n=0;n<a.bullets.length;n++)a.bullets[n].addEventListener("click",function(e){t.updateAnimation(a,this.dataset.id)},!1);this.instances.push(a),o.instances.push(a)},e.prototype.updateAnimations=function(){for(var e=0;e<this.instances.length;e++)this.updateAnimation(this.instances[e])},e.prototype.updateAnimation=function(e,t){if(t&&"number"==typeof Math.floor(t)){e.paused=!0,e.index=Math.floor(t);for(var a=0;a<e.slides.length;a++)e.slides[a].classList.remove("is-active");if(e.slides[e.index].classList.add("is-active"),e.bullets)for(a=0;a<e.bullets.length;a++)e.bullets[a].classList.remove("is-active"),e.index===a&&e.bullets[a].classList.add("is-active")}else if(e.slides&&!1===e.paused){for(a=0;a<e.slides.length;a++)e.slides[a].classList.remove("is-active");if(e.index++,e.index>=e.slides.length&&(e.index=0),e.slides[e.index].classList.add("is-active"),e.bullets)for(a=0;a<e.bullets.length;a++)e.bullets[a].classList.remove("is-active"),e.index===index&&e.bullets[a].classList.add("is-active")}},e}();o.Fader=e}(Components||(Components={})),function(n){var e=function(){function e(){this.instances=[];for(var e=document.querySelectorAll(".box--modal"),t=0;t<e.length;t++)this.createInstance(e[t])}return e.prototype.createInstance=function(e){var t=this,a={element:e,targetId:"",targetContent:""};e.dataset.hasOwnProperty("targetId")&&(a.targetId=e.dataset.targetId),e.dataset.hasOwnProperty("targetContent")&&(a.targetContent=e.dataset.targetContent),a.element.addEventListener("click",function(e){e.preventDefault(e),t.updateContent(a,this.dataset.id)},!1),this.instances.push(a),n.instances.push(a)},e.prototype.updateContent=function(e,t){if(0<e.targetContent.indexOf(".jpg")||0<e.targetContent.indexOf(".gif")||0<e.targetContent.indexOf(".png"))document.querySelector("#"+e.targetId+" img").src=e.targetContent;else if(0<e.targetContent.indexOf("youtube")&&0<e.targetContent.indexOf("embed")){document.querySelector("#"+e.targetId+" div.responsive-embed").innerHTML='<iframe width="960" height="540" src="'+e.targetContent+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>'}else if(0<e.targetContent.indexOf("vimeo")){document.querySelector("#"+e.targetId+" div.responsive-embed").innerHTML='<iframe width="960" height="540" src="'+e.targetContent+'" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen=""></iframe>'}try{$("#"+e.targetId).foundation("open")}catch(e){}},e}();n.Modal=e}(Components||(Components={})),function(t){var e=function(){function e(){this.instances=[];for(var e=document.querySelectorAll(".feature--grid"),t=0;t<e.length;t++)this.createInstance(e[t])}return e.prototype.createInstance=function(e){var r=this,l={element:e,targetId:t.Utils.uuidv4(),flickityId:t.Utils.uuidv4(),$panel:$(),$spacerPanel:$()},c=$(l.element).find(".grid-item");window.addEventListener("resize",function(e){r.onResize(l)},!1),c.each(function(e){var s=$(this);s.on("click",function(e){e.preventDefault();var t=s.find("a").data("json");if(!t)return!1;l.$panel.removeClass("open").remove(),l.$spacerPanel.removeClass("open").remove(),c.removeClass("active"),s.addClass("active");var a=r.buildExpandablePanel(l,t),n=a.clone();n.addClass("grid-spacer open").css({visibility:"hidden"}),a.find(".btn-close").on("click",function(e){e.preventDefault(e),c.removeClass("active"),a.removeClass("open").remove(),n.remove(),AOS.refresh()});var o=s.offset().top,i=s;s.find("~ .grid-item").each(function(){if($(this).offset().top!==o)return!1;i=$(this)}),l.$panel=a,l.$spacerPanel=n,r.injectPanel(l,i),l.$panel&&$("html, body").animate({scrollTop:l.$panel.offset().top-l.$panel.height()/15},400,function(){})})}),this.instances.push(l),t.instances.push(l)},e.prototype.buildExpandablePanel=function(e,t){var a,n;return template=$("."+t.template),0!==template.length&&(n=(n=(n=(n=(n=(n=(n=template[0].outerHTML).replace(new RegExp("{{imageSquare}}","g"),'<img src="'+t.imageSquare+'" />')).replace(new RegExp("{{heading}}","g"),t.heading)).replace(new RegExp("{{appStoreUrl}}","g"),t.appStoreUrl)).replace(new RegExp("{{googleUrl}}","g"),t.googleUrl)).replace(new RegExp("{{amazonUrl}}","g"),t.amazonUrl)).replace(new RegExp("{{content}}","g"),t.content),t.videoYoutube?n=n.replace(new RegExp("{{mediaContent}}","g"),'<div class="responsive-embed widescreen margin-bottom-0">'+t.videoYoutube+"</div>"):t.image?n=n.replace(new RegExp("{{mediaContent}}","g"),'<img src="'+t.image+'" />'):t.videoFile&&(n=n.replace(new RegExp("{{mediaContent}}","g"),'<div class="responsive-embed widescreen margin-bottom-0"><video width="960" height="540" poster="" autoplay><source src="'+t.videoFile+'" type="video/mp4" /><source src="'+t.video_file_webm+'" type="video/webm" /></video></div>')),n=t.video&&""!==t.video?n.replace(new RegExp("{{video}}","g"),'<div class="responsive-embed widescreen margin-bottom-0">'+t.video_embed+"</div>"):n.replace(new RegExp("{{video}}","g"),""),(a=$(n)).attr("id",e.targetId),a.find('.app-icon a[href=""]').parent().hide(),a.removeClass("template"),a.addClass("grid--list-expandable-panel"),a)},e.prototype.injectPanel=function(e,t){var a=e.$spacerPanel.detach(),n=e.$panel.detach();t.after(a),n.css({position:"absolute",top:$(".grid-template").eq(0).position().top,left:"50%",transform:"translateX(-50%)",width:"100%"}),$(e.element).append(n),AOS.refresh()},e.prototype.onResize=function(e){var t=$(e.element).find(".grid-item").filter(".active").first();if(t.length){var a=t.offset().top,n=t;e.$spacerPanel.detach(),e.$panel.detach();t.find("~ .grid-item").each(function(){if($(this).offset().top!==a)return!1;n=$(this)}),this.injectPanel(e,n)}},e}();t.GridExpandable=e}(Components||(Components={})),function(o){o.YouTubeVideos=function(){function e(){var e=this;this.version="0.0.1",this.instances=[],"object"!=typeof YT&&(console.warn("YouTube Player API is missing!"),o.YouTubeVideos.attachLibrary()),"undefined"==typeof onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=function(){e.attachPlayers()})}return e.prototype.attachPlayers=function(){for(var e=document.querySelectorAll(".is-youtube-video"),t=0;t<e.length;t++){var a=e[t],n={element:a,playerObject:null};a.id&&""===a.id&&(a.id=o.Utils.uuidv4()),a.id&&""!==a.id&&a.dataset&&a.dataset.hasOwnProperty("videoId")&&(n.playerObject=new YT.Player(a.id,{width:960,height:540,videoId:a.dataset.videoId})),this.instances.push(n)}},e.prototype.stopAll=function(){for(var e=0;e<this.instances.length;e++){var t=this.instances[e];t.playerObject&&t.playerObject.stopVideo()}},e.attachLibrary=function(){var e=document.createElement("script");e.type="text/javascript",e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},e}()}(Components||(Components={})),(Components||(Components={})).SearchFilter=function(){function e(){this.instances=[];for(var e=document.querySelectorAll(".g-filter-field"),t=0;t<e.length;t++)this.createInstance(e[t])}return e.prototype.createInstance=function(c){var d={element:c,filterId:"",filterDropdownElement:null,filterButtonElement:null};d.filterButtonElement=c.querySelector("input.g-filter-input"),d.filterDropdownElement=c.querySelector("select.g-complex-select-base-select"),d.filterId=d.filterDropdownElement.id,d.filterPanelElement=document.querySelector('.g-filter-flyout[data-display="'+d.filterId+'"]'),d.filterButtonElement.value=d.filterDropdownElement.options[d.filterDropdownElement.selectedIndex].text,d.filterButtonElement.addEventListener("click",function(e){var t=c.parentElement.children;if(d.filterPanelElement.classList.contains("js-show")){d.filterPanelElement.classList.remove("js-show");for(var a=0;a<t.length;a++)t[a].classList.remove("disabled")}else{for(a=0;a<t.length;a++)t[a].classList.add("disabled");c.classList.remove("disabled");for(var n=document.querySelectorAll(".g-filter-flyout"),o=0;o<n.length;o++)n[o].classList.remove("js-show");d.filterPanelElement.classList.add("js-show");var i=d.filterPanelElement.offsetTop+256;window.pageYOffset!==i&&$("html, body").animate({scrollTop:i},400,function(){})}},!1);for(var e=d.filterPanelElement.querySelectorAll(".g-complex-select-list .g-button"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){for(var t=document.querySelectorAll(".g-filter-flyout"),a=0;a<t.length;a++)t[a].classList.remove("js-show");for(var n=c.parentElement.children,o=0;o<n.length;o++)n[o].classList.remove("disabled");for(var i=d.filterPanelElement.querySelectorAll(".g-complex-select-list .g-button"),s=0;s<i.length;s++)i[s].classList.remove("active");this.classList.add("active");for(var r=0;r<d.filterDropdownElement.options.length;r++)d.filterDropdownElement.options[r].value===this.value&&(d.filterDropdownElement.selectedIndex=r);this.dataset.label&&(d.filterButtonElement.value=this.dataset.label);var l=d.filterDropdownElement.offsetTop+225;window.pageYOffset!==l&&$("html, body").animate({scrollTop:l},400,function(){})},!1);this.instances.push(d)},e}(),(Components||(Components={})).SearchCategories=function(){var s=$(".content--feed-activity .cell"),r=$(".carousel.carousel--activities");r.on("staticClick.flickity",function(e,t,a,n){if(a){var o=$(a),i=o.find(".btn-filter").data("category-id");r.find(".carousel-cell--selected").removeClass("carousel-cell--selected"),o.addClass("carousel-cell--selected"),s.removeClass("show"),s.filter(function(e){var t=$(s[e]).data("category-id");return!!t&&-1<t.indexOf(i)}).addClass("show")}})},(Components||(Components={})).FilterButtons=function(){function e(){this.instances=[];for(var e=document.querySelectorAll(".filtered--button-list"),t=0;t<e.length;t++)this.createInstance(e[t])}return e.prototype.createInstance=function(e){var n={element:e,filterId:"",filterDropdownElement:null,filterButtonElement:null};n.filterButtonElement=e.querySelector(".btn-option"),n.filterElements=e.querySelectorAll(".options .btn-filter"),n.filterId="",n.filterPanelElement=null,n.filterButtonElement.addEventListener("click",function(e){n.element.classList.contains("js-show")?n.element.classList.remove("js-show"):n.element.classList.add("js-show")},!1);for(var t=0;t<n.filterElements.length;t++)n.filterElements[t].addEventListener("click",function(e){n.element.classList.remove("js-show");var t=document.querySelectorAll(".content--feed-activity .cell");if(t)for(var a=0;a<t.length;a++)this.dataset.categoryId&&t[a].dataset.categoryId&&0<=t[a].dataset.categoryId.indexOf(this.dataset.categoryId)?t[a].classList.add("show"):t[a].classList.remove("show")},!1);this.instances.push(n)},e}(),$(document).ready(function(){var i;$("a").not(".external-link").on("click",function(e){var t,a,n,o,i=$(this),s=i.attr("href"),r=this.hostname;if(s&&0<s.length&&"#"!==s.substring(0,1)&&r!==location.hostname){var l=encodeURIComponent(i.attr("href")),c=(t=location.search,o="?"+(n=(a="url")+"="+l),t&&(o=t.replace(new RegExp("([?&])"+a+"[^&]*"),"$1"+n))===t&&(o+="&"+n),o);window.open("/you-are-leaving-us/"+c,"_blank"),e.stopPropagation(),e.preventDefault()}}),i=$(".template-age-gate"),$(".peppa-age-gate").each(function(e){var a=$(this),t=i.clone(),n=(a.outerHeight(),t.find("input"));function o(){var e=n.val(),t=(new Date).getFullYear();1900<=e&&13<=t-e?(a.removeClass("peppa-age-gate--open"),a.css("height","")):(n.val(""),$(".template-age-gate__error").css("display","block"))}t.find("button").on("click",function(){o()}),n.keypress(function(e){if(13===e.which)return o(),!1}),a.addClass("peppa-age-gate--open"),a.append(t),a.css("height",a.outerHeight())}),$(".to-the-top").on("click",function(e){$("html, body").animate({scrollTop:0},400,function(){})})});